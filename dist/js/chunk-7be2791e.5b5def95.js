(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7be2791e"],{"4c55":function(s,t,e){"use strict";e("5d67")},"5d67":function(s,t,e){},"9e7d":function(s,t,e){"use strict";e.r(t);var i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"row h-100"},[e("div",{staticClass:"setting-pannel col-3 h-100"},[e("Navbar",{attrs:{"navbar-status":s.status}})],1),e("div",{staticClass:"main-group col-3 h-100"},[e("div",{staticClass:"header"},[e("p",[s._v("上線使用者("+s._s(s.onlinePeople)+")")])]),e("div",{staticClass:"group-usercards"},s._l(s.userOn,(function(t){return e("div",{key:t.id,staticClass:"user-card d-flex"},[e("img",{attrs:{src:t.avatar,alt:"avater"}}),e("div",{staticClass:"user-content d-flex"},[e("p",{staticClass:"user-name"},[s._v(s._s(t.name))]),e("p",{staticClass:"user-account"},[s._v("@"+s._s(t.account))])])])})),0)]),e("div",{staticClass:"main-conversation col h-100"},[s._m(0),e("div",{staticClass:"main-content mt-2",attrs:{id:"main-content"}},[s._l(s.messagesHistory,(function(t){return e("div",{key:t.id},[t.User.id!==s.user.id?e("div",{staticClass:"conversation-content js-start"},[e("img",{attrs:{src:t.User.avatar,alt:"avatar"}}),e("div",{staticClass:"content-description"},[e("p",{staticClass:"description-text bg-grey"},[s._v(" "+s._s(t.content)+" ")]),e("p",{staticClass:"description-time"},[s._v(s._s(t.time))])])]):e("div",{staticClass:"conversation-content js-end"},[e("div",{staticClass:"content-description"},[e("p",{staticClass:"description-text bg-orange"},[s._v(" "+s._s(t.content)+" ")]),e("p",{staticClass:"description-time"},[s._v(s._s(t.time))])])])])})),e("div",{staticClass:"user-online"},s._l(s.offline,(function(t){return e("p",{key:t.id},[s._v(s._s(t))])})),0),s._l(s.messages,(function(t){return e("div",{key:t.id},[t.User.id!==s.user.id?e("div",{staticClass:"conversation-content js-start"},[e("img",{attrs:{src:t.User.avatar,alt:"avatar"}}),e("div",{staticClass:"content-description"},[e("p",{staticClass:"description-text bg-grey"},[s._v(" "+s._s(t.content)+" ")]),e("p",{staticClass:"description-time"},[s._v(s._s(t.time))])])]):e("div",{staticClass:"conversation-content js-end"},[e("div",{staticClass:"content-description"},[e("p",{staticClass:"description-text bg-orange"},[s._v(" "+s._s(t.content)+" ")]),e("p",{staticClass:"description-time"},[s._v(s._s(t.time))])])])])}))],2),e("div",{staticClass:"footer"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.user.message,expression:"user.message"}],attrs:{id:"message",type:"text",name:"message",autocomplete:"message",placeholder:"輸入訊息...",required:""},domProps:{value:s.user.message},on:{keyup:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.submit(t)},input:function(t){t.target.composing||s.$set(s.user,"message",t.target.value)}}}),e("img",{attrs:{src:"https://upload.cc/i1/2020/12/26/G6Kzb9.png",alt:"output"},on:{click:s.submit}})])])])])},n=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"header"},[e("p",[s._v("公開聊天室")])])}],a=(e("d81d"),e("b0c0"),e("5530")),r=e("d178"),o=e("2f62"),c=e("8055"),u=localStorage.getItem("token"),l=Object(c["io"])("https://socket-go.herokuapp.com/",{query:{token:u}}),d={components:{Navbar:r["a"]},data:function(){return{online:"",offline:[],messages:[],userOn:[],messagesHistory:[],messagesHistorySelf:[],messagesHistoryOther:[],onlinePeople:"",socket:{},user:{message:"",name:"",id:-1},status:"status1",account:"",token:""}},created:function(){this.socket=l,this.socket.emit("joinRoom"),this.fetchUser()},mounted:function(){var s=this;this.socket.on("loadMessages",(function(t){t.map((function(t){t.User.id===s.currentUser.id?s.messagesHistorySelf.push(t):s.messagesHistoryOther.push(t)})),s.messagesHistory=t})),this.socket.on("currentUsers",(function(t){s.userOn=t.userList,s.onlinePeople=t.usersCount})),this.socket.on("userJoin",(function(t){s.offline.push(t)})),this.socket.on("serverMessage",(function(t){s.messages.push(t)})),this.socket.on("userLeave",(function(t){s.offline.push(t)})),this.scrollToEnd()},updated:function(){this.scrollToEnd()},computed:Object(a["a"])({},Object(o["b"])(["currentUser","isAuthenticated"])),methods:{submit:function(){this.socket.emit("userMessage",this.user.message),this.user.message=""},fetchUser:function(){this.user.name=this.currentUser.name,this.account=this.currentUser.name,this.user.id=this.currentUser.id},scrollToEnd:function(){var s=this.$el.querySelector("#main-content");s.scrollTop=s.scrollHeight}}},m=d,p=(e("4c55"),e("2877")),v=Object(p["a"])(m,i,n,!1,null,"40faa982",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-7be2791e.5b5def95.js.map