{"version":3,"sources":["webpack:///./src/views/scoketMessage.vue?1907","webpack:///./src/views/scoketMessage.vue?765f","webpack:///src/views/scoketMessage.vue","webpack:///./src/views/scoketMessage.vue?4fc8","webpack:///./src/views/scoketMessage.vue?e5fe"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","status","_m","_l","mes","key","id","User","avatar","_v","_s","name","account","online","content","time","directives","rawName","value","user","expression","domProps","on","$event","target","composing","$set","submit","staticRenderFns","query","token","components","Navbar","data","offline","messageSelf","messageOther","userOn","messagesHistory","socket","message","created","emit","mounted","console","log","historyMessages","msg","serverMessage","computed","methods","fetchUser","currentUser","component"],"mappings":"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","file":"js/chunk-4660fdb2.52b94ea9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scoketMessage.vue?vue&type=style&index=0&id=95b880fe&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row h-100\"},[_c('div',{staticClass:\"setting-pannel col-3 h-100\"},[_c('Navbar',{attrs:{\"navbar-status\":_vm.status}})],1),_c('div',{staticClass:\"main-group col-3 h-100\"},[_vm._m(0),_c('div',{staticClass:\"group-usercards\"},_vm._l((_vm.messagesHistory),function(mes){return _c('div',{key:mes.id,staticClass:\"user-card d-flex\"},[_c('img',{attrs:{\"src\":mes.User.avatar,\"alt\":\"avater\"}}),_c('div',{staticClass:\"user-content d-flex\"},[_c('p',{staticClass:\"user-name\"},[_vm._v(_vm._s(mes.User.name))]),_c('p',{staticClass:\"user-account\"},[_vm._v(\"@\"+_vm._s(mes.User.account))])])])}),0)]),_c('div',{staticClass:\"main-conversation col h-100\"},[_vm._m(1),_c('div',{staticClass:\"main-content\"},[_c('div',{staticClass:\"user-online\"},[_c('p',[_vm._v(_vm._s(_vm.online))])]),_vm._l((_vm.messageOther),function(mes){return _c('div',{key:mes.id,staticClass:\"conversation-content js-start\"},[_c('img',{attrs:{\"src\":mes.User.avatar,\"alt\":\"avatar\"}}),_c('div',{staticClass:\"content-description\"},[_c('p',{staticClass:\"description-text bg-grey\"},[_vm._v(\" \"+_vm._s(mes.content)+\" \")]),_c('p',{staticClass:\"description-time\"},[_vm._v(_vm._s(mes.time))])])])}),_vm._l((_vm.messageSelf),function(mes){return _c('div',{key:mes.id,staticClass:\"conversation-content js-end\"},[_c('img',{attrs:{\"src\":mes.User.avatar,\"alt\":\"avatar\"}}),_c('div',{staticClass:\"content-description\"},[_c('p',{staticClass:\"description-text bg-orange\"},[_vm._v(\" \"+_vm._s(mes.content)+\" \")]),_c('p',{staticClass:\"description-time\"},[_vm._v(_vm._s(mes.time))])])])})],2),_c('div',{staticClass:\"footer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.message),expression:\"user.message\"}],attrs:{\"id\":\"message\",\"type\":\"text\",\"name\":\"message\",\"autocomplete\":\"message\",\"placeholder\":\"輸入訊息...\",\"required\":\"\"},domProps:{\"value\":(_vm.user.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"message\", $event.target.value)}}}),_c('img',{attrs:{\"src\":\"https://upload.cc/i1/2020/12/26/G6Kzb9.png\",\"alt\":\"output\"},on:{\"click\":_vm.submit}})])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('p',[_vm._v(\"上線使用者(5)\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('p',[_vm._v(\"公開聊天室\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"row h-100\">\n      <div class=\"setting-pannel col-3 h-100\">\n        <Navbar :navbar-status=\"status\" />\n      </div>\n      <div class=\"main-group col-3 h-100\">\n        <div class=\"header\"><p>上線使用者(5)</p></div>\n        <div class=\"group-usercards\">\n          <div\n            class=\"user-card d-flex\"\n            v-for=\"mes in messagesHistory\"\n            :key=\"mes.id\"\n          >\n            <img :src=\"mes.User.avatar\" alt=\"avater\" />\n            <div class=\"user-content d-flex\">\n              <p class=\"user-name\">{{ mes.User.name }}</p>\n              <p class=\"user-account\">@{{ mes.User.account }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"main-conversation col h-100\">\n        <div class=\"header\"><p>公開聊天室</p></div>\n        <div class=\"main-content\">\n          <!-- 上線訊息 -->\n          <div class=\"user-online\">\n            <p>{{ online }}</p>\n          </div>\n\n          <!-- 他人發言 -->\n          <div\n            class=\"conversation-content js-start\"\n            v-for=\"mes in messageOther\"\n            :key=\"mes.id\"\n          >\n            <img :src=\"mes.User.avatar\" alt=\"avatar\" />\n            <div class=\"content-description\">\n              <p class=\"description-text bg-grey\">\n                {{ mes.content }}\n              </p>\n              <p class=\"description-time\">{{ mes.time }}</p>\n            </div>\n          </div>\n          <!-- 自己發言 -->\n          <div\n            class=\"conversation-content js-end\"\n            v-for=\"mes in messageSelf\"\n            :key=\"mes.id\"\n          >\n            <img :src=\"mes.User.avatar\" alt=\"avatar\" />\n            <div class=\"content-description\">\n              <p class=\"description-text bg-orange\">\n                {{ mes.content }}\n              </p>\n              <p class=\"description-time\">{{ mes.time }}</p>\n            </div>\n          </div>\n        </div>\n        <div class=\"footer\">\n          <input\n            v-model=\"user.message\"\n            id=\"message\"\n            type=\"text\"\n            name=\"message\"\n            autocomplete=\"message\"\n            placeholder=\"輸入訊息...\"\n            required\n          />\n          <img\n            @click=\"submit\"\n            src=\"https://upload.cc/i1/2020/12/26/G6Kzb9.png\"\n            alt=\"output\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from \"./../components/Navbar\";\nimport { mapState } from \"vuex\";\nimport io from \"socket.io-client\";\n// import socketAuthorizationAPI from \"./../apis/socketAuthorization\";\n// import axios from \"axios\";\n\n// const token = localStorage.getItem(\"token\")\nconst socket = io(\"https://socket-go.herokuapp.com/\", {\n  query: {\n    token:\n      \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImlhdCI6MTYwOTA0ODI1MH0.GnOzkLD9mHNuFJKTSq88w_MCkydLxrSxckFi59z2t4E\",\n  },\n});\n\nexport default {\n  components: {\n    // Spinner,\n    Navbar,\n    // Followers,\n    // twitterList,\n  },\n  data() {\n    return {\n      // 上線訊息\n      online: \"\",\n      // 下線訊息\n      offline: [],\n      //放自己的發言\n      messageSelf: [],\n      //放其他人的發言\n      messageOther: [],\n      //放上線的人\n      userOn: [],\n      //放歷史訊息\n      messagesHistory: [],\n      socket: {},\n      user: {\n        message: \"\",\n        name: \"\",\n        id: -1,\n      },\n      status: \"status1\",\n      account: \"\",\n      token: \"\",\n    };\n  },\n\n  created() {\n    this.socket = socket;\n    this.socket.emit(\"joinRoom\");\n\n    //   axios\n    //     .post(\"https://socket-go.herokuapp.com/api/login\", {\n    //       account: this.currentUser.name,\n    //       password: \"12345678\",\n    //     })\n    //     .then((res) => {\n    //       this.token = res.data.token;\n    //       console.log(this.token);\n    //       return res.data.token;\n    //     })\n\n    //     .catch((error) => {\n    //       console.error(error);\n    //     });\n    //   // const token = this.token;\n    //   console.log(this.token);\n\n    //   this.fetchUser();\n  },\n\n  mounted() {\n    this.socket.on(\"loadMessages\", (historyMessages) => {\n      console.log(historyMessages);\n    });\n\n    this.socket.on(\"userJoin\", (msg) => {\n      console.log(msg);\n      this.online = msg;\n    });\n\n    this.socket.on(\"serverMessage\", (serverMessage) => {\n      console.log(serverMessage);\n      if (serverMessage.User.name === this.currentUser.name) {\n        this.messageSelf.push(serverMessage);\n      } else {\n        this.messageOther.push(serverMessage);\n      }\n    });\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  methods: {\n    submit() {\n      this.socket.emit(\"userMessage\", this.user.message);\n      this.user.message = \"\";\n    },\n    fetchUser() {\n      this.user.name = this.currentUser.name;\n      this.account = this.currentUser.name;\n      this.user.id = this.currentUser.id;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  margin: 0 auto 0 auto;\n  max-height: 800px;\n}\n.setting-pannel {\n  width: auto;\n}\n\n/* 上線使用者 */\n.main-group {\n  width: 350px;\n  padding: 0;\n  border-left: 1px #e6ecf0 solid;\n  border-right: 1px #e6ecf0 solid;\n}\n.main-group .header {\n  width: 100%;\n  height: 55px;\n  border-bottom: 1px #e6ecf0 solid;\n}\n.main-group .header p {\n  font-family: Noto Sans TC;\n  font-style: normal;\n  font-weight: bold;\n  font-size: 19px;\n  line-height: 28px;\n  color: #1c1c1c;\n  padding-top: 15px;\n  padding-left: 15px;\n}\n.group-usercards {\n  max-height: 1145px;\n}\n.user-card {\n  height: 70px;\n  border-bottom: 1px #e6ecf0 solid;\n  align-items: center;\n}\n.user-card img {\n  margin-left: 8px;\n  height: 50px;\n  width: 50px;\n}\n.user-card .user-content {\n  height: 22px;\n  width: 250px;\n}\n.user-card .user-content p {\n  margin: 0 0 0 6px;\n  width: auto;\n  line-height: 22px;\n}\n.user-card .user-content .user-name {\n  font-family: Noto Sans TC;\n  font-style: normal;\n  font-weight: bold;\n  font-size: 15px;\n  line-height: 22px;\n  color: #1c1c1c;\n}\n.user-card .user-content .user-account {\n  font-family: Noto Sans TC;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 15px;\n  line-height: 22px;\n  color: #657786;\n}\n\n/* 聊天室 */\n.main-conversation {\n  width: 1200px;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  border-right: 1px #e6ecf0 solid;\n}\n.main-conversation .header {\n  width: 100%;\n  height: 55px;\n  border-bottom: 1px #e6ecf0 solid;\n}\n.main-conversation .header p {\n  font-family: Noto Sans TC;\n  font-style: normal;\n  font-weight: bold;\n  font-size: 19px;\n  line-height: 28px;\n  color: #1c1c1c;\n  padding-top: 15px;\n  padding-left: 15px;\n}\n.main-conversation .main-content {\n  width: 100%;\n  height: 1100px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n}\n.user-online {\n  align-content: center;\n  justify-content: center;\n}\n.user-online p {\n  width: 20%;\n  height: 30px;\n  background: #ebf0f3;\n  margin: 5px auto 10px auto;\n  line-height: 30px;\n  text-align: center;\n  border-radius: 20px;\n}\n.js-start {\n  align-content: center;\n  justify-content: flex-start;\n  padding-left: 30px;\n}\n.js-end {\n  align-content: center;\n  justify-content: flex-end;\n  padding-right: 30px;\n}\n.conversation-content {\n  width: 100%;\n  height: auto;\n  display: flex;\n}\n.conversation-content img {\n  height: 50px;\n  width: 50px;\n  margin-right: 20px;\n}\n.conversation-content p {\n  margin: 0;\n}\n.bg-orange {\n  background: #ff6600;\n  color: white;\n}\n.bg-grey {\n  background: #ebf0f3;\n}\n.description-text {\n  margin: 0;\n  width: 300px;\n  border-radius: 20px;\n  padding: 5px 10px 5px 10px;\n}\n.content-description .description-time {\n  margin: 0 0 0 10px;\n}\n.main-conversation .footer {\n  display: flex;\n  width: 100%;\n  height: 40px;\n}\n.main-conversation .footer input {\n  width: 80%;\n  height: 30px;\n  margin: 0 5% 0 5%;\n  border-radius: 15px;\n  border: none;\n  background: #ebf0f3;\n  padding: 0;\n  padding-left: 5%;\n}\n.main-conversation .footer img {\n  width: 30px;\n  height: 30px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scoketMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scoketMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./scoketMessage.vue?vue&type=template&id=95b880fe&scoped=true&\"\nimport script from \"./scoketMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./scoketMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./scoketMessage.vue?vue&type=style&index=0&id=95b880fe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95b880fe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}