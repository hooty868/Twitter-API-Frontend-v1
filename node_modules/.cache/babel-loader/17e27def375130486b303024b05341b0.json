{"remainingRequest":"/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/node_modules/babel-loader/lib/index.js!/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/node_modules/eslint-loader/index.js??ref--13-0!/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/src/router/index.js","dependencies":[{"path":"/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/src/router/index.js","mtime":1608530049154},{"path":"/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvU3RldmUvRGVza3RvcC9maW5hbFByb2plY3QvdHdpdGVyLXByb2plY3QtdjEvVHdpdHRlci1BUEktRnJvbnRlbmQtdjEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBOb3RGb3VuZCBmcm9tICcuLi92aWV3cy9Ob3RGb3VuZC52dWUnOwppbXBvcnQgU2lnbkluIGZyb20gJy4uL3ZpZXdzL1NpZ25Jbi52dWUnOwppbXBvcnQgTWFpbiBmcm9tICcuLi92aWV3cy9tYWluLnZ1ZSc7CmltcG9ydCBBZG1pblNpZ25JbiBmcm9tICcuLy4uL3ZpZXdzL0FkbWluU2lnbkluLnZ1ZSc7CmltcG9ydCBzdG9yZSBmcm9tICcuLy4uL3N0b3JlJzsKVnVlLnVzZShWdWVSb3V0ZXIpOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnLycsCiAgbmFtZTogJ3Jvb3QnLAogIHJlZGlyZWN0OiAnL3NpZ25pbicKfSwgewogIHBhdGg6ICcvc2lnbmluJywKICBuYW1lOiAnc2lnbi1pbicsCiAgY29tcG9uZW50OiBTaWduSW4KfSwgewogIHBhdGg6ICcvc2lnbnVwJywKICBuYW1lOiAnc2lnbi11cCcsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCcuLi92aWV3cy9TaWduVXAudnVlJyk7CiAgfQp9LCB7CiAgcGF0aDogJy9zZXR0aW5nLzppZCcsCiAgbmFtZTogJ3NldHRpbmcnLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vdmlld3MvU2V0dGluZy52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL21haW4nLAogIG5hbWU6ICdtYWluJywKICBjb21wb25lbnQ6IE1haW4KfSwgewogIHBhdGg6ICcvdHdpdHRlcmRldGFpbCcsCiAgbmFtZTogJ21haW4nLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vdmlld3MvdHdpdHRlckluZGV4LnZ1ZScpOwogIH0KfSwgewogIHBhdGg6ICcvYWRtaW4vc2lnbmluJywKICBuYW1lOiAnYWRtaW4tc2lnbmluJywKICBjb21wb25lbnQ6IEFkbWluU2lnbkluCn0sIHsKICBwYXRoOiAnL2FkbWluL3VzZXJzJywKICBuYW1lOiAnYWRtaW4tdXNlcnMnLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vdmlld3MvQWRtaW5Vc2Vycy52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL2FkbWluL3R3ZWV0cycsCiAgbmFtZTogJ2FkbWluLXR3ZWV0cycsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCcuLi92aWV3cy9BZG1pblR3ZWV0cy52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnKicsCiAgbmFtZTogJ25vdC1mb3VuZCcsCiAgY29tcG9uZW50OiBOb3RGb3VuZAp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIGxpbmtFeGFjdEFjdGl2ZUNsYXNzOiAnYWN0aXZlJywKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB0b2tlbkluTG9jYWxTdG9yYWdlLCB0b2tlbkluU3RvcmUsIGlzQXV0aGVudGljYXRlZDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdG9rZW5JbkxvY2FsU3RvcmFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICB0b2tlbkluU3RvcmUgPSBzdG9yZS5zdGF0ZS50b2tlbjsKICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gc3RvcmUuc3RhdGUuaXNBdXRoZW50aWNhdGVkOyAvLyDmr5TovIMgbG9jYWxTdG9yYWdlIOWSjCBzdG9yZSDkuK3nmoQgdG9rZW4g5piv5ZCm5LiA5qijCgogICAgICAgICAgICBpZiAoISh0b2tlbkluTG9jYWxTdG9yYWdlICYmIHRva2VuSW5Mb2NhbFN0b3JhZ2UgIT09IHRva2VuSW5TdG9yZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZmV0Y2hDdXJyZW50VXNlcicpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGlmICghKCFpc0F1dGhlbnRpY2F0ZWQgJiYgdG8ubmFtZSAhPT0gJ3NpZ24taW4nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgnL3NpZ25pbicpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBpZiAoIShpc0F1dGhlbnRpY2F0ZWQgJiYgdG8ubmFtZSA9PT0gJ3NpZ24taW4nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgnL21haW4nKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/Users/Steve/Desktop/finalProject/twiter-project-v1/Twitter-API-Frontend-v1/src/router/index.js"],"names":["Vue","VueRouter","NotFound","SignIn","Main","AdminSignIn","store","use","routes","path","name","redirect","component","router","linkExactActiveClass","beforeEach","to","from","next","tokenInLocalStorage","localStorage","getItem","tokenInStore","state","token","isAuthenticated","dispatch"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport NotFound from '../views/NotFound.vue'\nimport SignIn from '../views/SignIn.vue'\nimport Main from '../views/main.vue'\nimport AdminSignIn from './../views/AdminSignIn.vue'\nimport store from './../store'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'root',\n    redirect: '/signin'\n  },\n  {\n    path: '/signin',\n    name: 'sign-in',\n    component: SignIn\n  },\n  {\n    path: '/signup',\n    name: 'sign-up',\n    component: () => import('../views/SignUp.vue')\n  },\n  {\n    path: '/setting/:id',\n    name: 'setting',\n    component: () => import('../views/Setting.vue')\n  },\n  {\n    path: '/main',\n    name: 'main',\n    component: Main\n  },\n  {\n    path: '/twitterdetail',\n    name: 'main',\n    component: () => import('../views/twitterIndex.vue')\n  },\n  {\n    path: '/admin/signin',\n    name: 'admin-signin',\n    component: AdminSignIn\n  },\n  {\n    path: '/admin/users',\n    name: 'admin-users',\n    component: () => import('../views/AdminUsers.vue')\n  },\n  {\n    path: '/admin/tweets',\n    name: 'admin-tweets',\n    component: () => import('../views/AdminTweets.vue')\n  },\n  {\n    path: '*',\n    name: 'not-found',\n    component: NotFound\n  }\n]\n\nconst router = new VueRouter({\n  linkExactActiveClass: 'active',\n  routes\n})\n\nrouter.beforeEach(async (to, from, next) => {\n  const tokenInLocalStorage = localStorage.getItem('token')\n  const tokenInStore = store.state.token\n  let isAuthenticated = store.state.isAuthenticated\n\n  // 比較 localStorage 和 store 中的 token 是否一樣\n  if (tokenInLocalStorage && tokenInLocalStorage !== tokenInStore) {\n    isAuthenticated = await store.dispatch('fetchCurrentUser')\n  }\n\n  // 如果 token 無效則轉址到登入頁\n  if (!isAuthenticated && to.name !== 'sign-in') {\n    next('/signin')\n    return\n  }\n\n  // 如果 token 有效則轉址到餐廳首頁\n  if (isAuthenticated && to.name === 'sign-in') {\n    next('/main')\n    return\n  }\n\n  next()\n})\n\nexport default router\n"]}]}