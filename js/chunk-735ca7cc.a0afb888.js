(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-735ca7cc"],{"0687":function(e,t,r){},1602:function(e,t,r){"use strict";var n=r("2fa3"),o=function(){return localStorage.getItem("token")};t["a"]={getUser:function(e){return n["b"].get("/users/".concat(e),{headers:{Authorization:"Bearer ".concat(o())}})},getTweets:function(e){return n["b"].get("/users/".concat(e,"/tweets"),{headers:{Authorization:"Bearer ".concat(o())}})},getLikes:function(e){return n["b"].get("/users/".concat(e,"/likes"),{headers:{Authorization:"Bearer ".concat(o())}})},getReply:function(e){return n["b"].get("/users/".concat(e,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(o())}})},getFollower:function(e){return n["b"].get("/users/".concat(e,"/followers"),{headers:{Authorization:"Bearer ".concat(o())}})},getFollowing:function(e){return n["b"].get("/users/".concat(e,"/followings"),{headers:{Authorization:"Bearer ".concat(o())}})},addFollowing:function(e){return n["b"].post("/followships",{id:e},{headers:{Authorization:"Bearer ".concat(o())}})},deleteFollowing:function(e){return n["b"].delete("/followships/".concat(e),{headers:{Authorization:"Bearer ".concat(o())}})},update:function(e){var t=e.userId,r=e.formData;return n["b"].put("/users/".concat(t),r,{headers:{Authorization:"Bearer ".concat(o())}})},socket:function(){return n["c"].get("/",{headers:{Authorization:"Bearer ".concat(o())}})}}},"3ebe":function(e,t,r){},"45b5":function(e,t,r){},"5c2c":function(e,t,r){"use strict";r("3ebe")},8793:function(e,t,r){"use strict";r("0687")},e420:function(e,t,r){"use strict";r("45b5")},f5da:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"row h-100"},[r("div",{staticClass:"setting-pannel col-3 h-100"},[r("Navbar")],1),r("div",{staticClass:"main-content col h-100"},[r("div",{staticClass:"header pl-3"},[r("img",{attrs:{src:"https://upload.cc/i1/2020/12/24/oBeWkX.png",alt:""},on:{click:function(t){return e.$router.back()}}}),r("div",{staticClass:"header-content"},[r("p",{staticClass:"name"},[e._v(e._s(e.user.name))]),r("p",{staticClass:"twitter"},[e._v(e._s(e.user.tweetCount)+"推文")])])]),r("div",{staticClass:"user-tweet"},[r("div",{staticClass:"content-control d-flex"},[r("div",{staticClass:"tweets content",class:{active:e.showContent.follower},on:{click:function(t){return e.showfollower()}}},[e._v(" 跟隨者 ")]),r("div",{staticClass:"response content",class:{active:e.showContent.following},on:{click:function(t){return e.showfollowing()}}},[e._v(" 正在跟隨 ")])]),r("div",{staticClass:"content-render"},[e.showContent.follower?r("Follower"):e._e(),r("Following",{directives:[{name:"show",rawName:"v-show",value:e.showContent.following,expression:"showContent.following"}]})],1)])]),r("div",{staticClass:"main-follower col-4 h-100"},[r("Followers",{attrs:{"user-profile":e.user,"follower-list":e.followerlist}})],1)])])},o=[],a=(r("96cf"),r("1da1")),s=r("5530"),c=r("d178"),i=r("7168"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.followers,(function(t){return r("div",{key:t.followerId,staticClass:"card",on:{click:function(r){return e.userLink(t.followerId)}}},[r("div",{staticClass:"user-avatar"},[r("img",{staticClass:"avatar",attrs:{src:t.avatar,alt:""},on:{click:function(r){return e.userLink(t.followerId)}}})]),r("div",{staticClass:"content"},[r("div",{staticClass:"detail"},[r("div",{staticClass:"name mr-1"},[e._v(e._s(t.name))]),r("div",{staticClass:"account mr-1"},[e._v("@"+e._s(t.account))]),r("div",{staticClass:"tweet"},[e._v(" "+e._s(t.introduction)+" ")])])]),t.isFollowed?r("button",{staticClass:"follower-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.deleteFollowing(t.followerId)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"follow-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.addFollowing(t.followerId)}}},[e._v(" 追隨 ")])])})),0)},u=[],f=(r("d81d"),r("1602")),w=r("2fa3"),d=r("2f62"),h={data:function(){return{followers:[]}},computed:Object(s["a"])({},Object(d["b"])(["currentUser"])),created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].getFollower(e.currentUser.id);case 3:r=t.sent,n=r.data,e.followers=n,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("error",t.t0),w["a"].fire({icon:"warning",title:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].deleteFollowing(e);case 3:if(n=r.sent,o=n.data,"success"===o.status){r.next=7;break}throw new Error(o.message);case 7:t.followers=t.followers.map((function(t){return t.followerId!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{isFollowed:0})})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},addFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].addFollowing(e);case 3:if(n=r.sent,o=n.data,console.log(e),"success"===o.status){r.next=8;break}throw new Error(o.message);case 8:t.followers=t.followers.map((function(t){return t.followerId!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{isFollowed:1})})),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},userLink:function(e){console.log(e),this.$router.push({name:"profile",params:{id:e}})}}},v=h,p=(r("e420"),r("2877")),g=Object(p["a"])(v,l,u,!1,null,"1b565c3b",null),b=g.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.followers,(function(t){return r("div",{key:t.followingId,staticClass:"card",on:{click:function(r){return e.userLink(t.followingId)}}},[r("div",{staticClass:"user-avatar"},[r("img",{staticClass:"avatar",attrs:{src:t.avatar,alt:""},on:{click:function(r){return e.userLink(t.followingId)}}})]),r("div",{staticClass:"content"},[r("div",{staticClass:"detail"},[r("div",{staticClass:"name mr-1"},[e._v(e._s(t.name))]),r("div",{staticClass:"account mr-1"},[e._v("@"+e._s(t.account))]),r("div",{staticClass:"tweet"},[e._v(" "+e._s(t.introduction)+" ")])])]),t.isFollowed?r("button",{staticClass:"follower-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.deleteFollowing(t.followingId)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"follow-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.addFollowing(t.followingId)}}},[e._v(" 追隨 ")])])})),0)},k=[],C={data:function(){return{followers:[]}},computed:Object(s["a"])({},Object(d["b"])(["currentUser"])),created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f["a"].getFollowing(e.currentUser.id);case 3:r=t.sent,n=r.data,e.followers=n,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("error",t.t0),w["a"].fire({icon:"warning",title:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].deleteFollowing(e);case 3:if(n=r.sent,o=n.data,"success"===o.status){r.next=7;break}throw new Error(o.message);case 7:t.followers=t.followers.map((function(t){return t.followingId!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{isFollowed:0})})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},addFollowing:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].addFollowing(e);case 3:if(n=r.sent,o=n.data,"success"===o.status){r.next=7;break}throw new Error(o.message);case 7:t.followers=t.followers.map((function(t){return t.followingId!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{isFollowed:1})})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),w["a"].fire({icon:"error",title:"無法追蹤，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},userLink:function(e){console.log(e),this.$router.push({name:"profile",params:{id:e}})}}},x=C,F=(r("8793"),Object(p["a"])(x,m,k,!1,null,"30cbf718",null)),_=F.exports,j=r("ebc9"),O=r("2708"),R={mixins:[O["a"]],components:{Navbar:c["a"],Followers:i["a"],Follower:b,Following:_},data:function(){return{isFollowed:!0,user:{},showContent:{follower:!0,following:!1},followerlist:[]}},computed:Object(s["a"])({},Object(d["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUsers(e),this.fetchFollowerList()},methods:{fetchFollowerList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j["a"].TopUsers();case 3:r=t.sent,e.followerlist=r.data,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("error",t.t0),w["a"].fire({icon:"warning",title:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchUsers:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f["a"].getUser(e);case 3:n=r.sent,o=n.data,t.user=o,r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0),w["a"].fire({icon:"warning",title:r.t0});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},showfollower:function(){this.showContent.follower=!0,this.showContent.following=!1},showfollowing:function(){this.showContent.follower=!1,this.showContent.following=!0}}},I=R,B=(r("5c2c"),Object(p["a"])(I,n,o,!1,null,"29fa8936",null));t["default"]=B.exports}}]);
//# sourceMappingURL=chunk-735ca7cc.a0afb888.js.map