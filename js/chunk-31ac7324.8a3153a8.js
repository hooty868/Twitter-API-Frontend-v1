(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31ac7324"],{"0186":function(t,e,r){},1045:function(t,e,r){},"498a":function(t,e,r){"use strict";var a=r("23e7"),s=r("58a8").trim,i=r("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return s(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),s=r("5899"),i="["+s+"]",n=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),o=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(n,"")),2&t&&(r=r.replace(c,"")),r}};t.exports={start:o(1),end:o(2),trim:o(3)}},"97c0":function(t,e,r){"use strict";r("1045")},"9ad7":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"row h-100"},[r("div",{staticClass:"setting-pannel col-3"},[r("Navbar",{attrs:{"user-profile":t.UserProfile},on:{"after-create-twitter":t.afterCreateTwitter}})],1),r("div",{staticClass:"main-content col h-100"},[r("div",{staticClass:"header d-flex"},[r("img",{staticClass:"back-icon cursor-hand",attrs:{src:"https://upload.cc/i1/2020/12/24/oBeWkX.png",alt:"backIcon"},on:{click:function(e){return t.$router.go(-1)}}}),r("p",[t._v("推文")])]),t.isLoading?r("Spinner"):r("div",{staticClass:"twitter-bar d-flex flex-column w-100"},[r("div",{staticClass:"twitter-bar-container"},[r("div",{staticClass:"profile-detail-bar d-flex cursor-hand",on:{click:function(e){return t.profileLink(t.UserProfile.UserId)}}},[r("img",{staticClass:"profile-avater",attrs:{src:t.UserProfile.User.avatar||"https://upload.cc/i1/2021/01/07/Qp547R.png",alt:"avater"}}),r("div",{staticClass:"card-content"},[r("p",{staticClass:"card-name"},[t._v(" "+t._s(t.UserProfile.User.name)+" ")]),r("p",{staticClass:"card-account"},[t._v("@"+t._s(t.UserProfile.User.account))])])]),r("div",{staticClass:"content-description flex-gr1 w-100"},[r("p",{staticClass:"content-text"},[t._v(" "+t._s(t.UserProfile.description)+" ")])]),r("div",{staticClass:"reply-time flex-gr1 d-flex w-100"},[r("p",{staticClass:"content-text"},[t._v(" "+t._s(t._f("timeFormat")(t.UserProfile.createdAt))+" ")])]),r("div",{staticClass:"function-bar flex-gr1 d-flex w-100"},[r("p",{staticClass:"content-text num-bd"},[t._v(" "+t._s(t.UserProfile.repliedCount)+" ")]),r("p",{staticClass:"content-text text-bd mr-5 mr-20"},[t._v("回覆")]),r("p",{staticClass:"content-text num-bd"},[t._v(t._s(t.UserProfile.likedCount))]),r("p",{staticClass:"content-text text-bd mr-5"},[t._v("喜歡次數")])]),r("div",{staticClass:"icon-bar flex-gr1",attrs:{disabled:t.isProcessing}},[r("img",{staticClass:"icon-img",attrs:{src:"https://upload.cc/i1/2020/12/24/xfD6YV.png",alt:"icon","data-toggle":"modal","data-target":"#replyModal"}}),parseInt(t.UserProfile.isLiked,10)?r("img",{staticClass:"icon-img",attrs:{src:"https://upload.cc/i1/2020/12/24/LCl9BZ.png",alt:"icon",disabled:t.isProcessing},on:{click:function(e){return t.Unliketwitter(t.UserProfile.id)}}}):r("img",{staticClass:"icon-img",attrs:{src:"https://upload.cc/i1/2020/12/24/XL7fKH.png",alt:"icon"},on:{click:function(e){return t.Liketwitter(t.UserProfile.id)}}})])])]),r("div",{staticClass:"modal fade",attrs:{id:"replyModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(0),r("div",{staticClass:"twitter-bar d-flex flex-column"},[r("div",{staticClass:"content-bar d-flex"},[r("img",{staticClass:"profile-avater",attrs:{src:t.UserProfile.User.avatar,alt:"avater"}}),r("div",{staticClass:"content-description"},[r("div",{staticClass:"description-head"},[r("p",{staticClass:"head-name"},[t._v(t._s(t.UserProfile.User.name))]),r("p",{staticClass:"head-account-time"},[t._v(" @"+t._s(t.UserProfile.User.account)+" · 3小時 ")])]),r("div",{staticClass:"description-content"},[r("p",[t._v(" "+t._s(t.UserProfile.description)+" ")])]),r("div",{staticClass:"description-footer"},[r("p",{staticClass:"reply-for"},[t._v("回覆給")]),r("p",{staticClass:"reply-account"},[t._v(" ＠"+t._s(t.UserProfile.User.account)+" ")])])])]),r("div",{staticClass:"reply-bar"},[r("img",{staticClass:"reply-avater",attrs:{src:t.currentuser.avatar,alt:"avater"}}),r("form",{staticClass:"form-group",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.replytwitter(t.UserProfile.id)}}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Replytwitter,expression:"Replytwitter"}],staticClass:"twitter-input",attrs:{id:"twitter",name:"twitter",autocomplete:"twitter",placeholder:"推你的回覆",maxlength:"140",required:""},domProps:{value:t.Replytwitter},on:{input:function(e){e.target.composing||(t.Replytwitter=e.target.value)}}}),r("button",{staticClass:"btn btn-lg btn-submit btn-block mb-3",attrs:{type:"submit",block:""}},[t._v(" 回覆 ")])])])])])])]),r("ReplyList",{attrs:{"user-profile":t.UserProfile,Twitters:t.twitters}})],1),r("div",{staticClass:"main-follower col-4 h-100"},[r("Followers",{attrs:{"user-profile":t.UserProfile,"follower-list":t.followerlist}})],1)])])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header w-100"},[r("img",{staticClass:"cancle-icon",attrs:{src:"https://upload.cc/i1/2020/12/24/RSJ94l.png",alt:"cancle","data-dismiss":"modal"}})])}],i=(r("b0c0"),r("498a"),r("96cf"),r("1da1")),n=r("5530"),c=r("d178"),o=r("7168"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"twitter-cards w-100"},t._l(t.twitters,(function(e){return r("div",{key:e.id,staticClass:"comments-card w-100 d-flex"},[r("img",{staticClass:"card-avater cursor-hand",attrs:{src:e.User.avatar,alt:"avater"},on:{click:function(r){return t.profileLink(e.UserId)}}}),r("div",{staticClass:"card-content flex-grow-1"},[r("div",{staticClass:"content-title d-flex cursor-hand",on:{click:function(r){return t.profileLink(e.UserId)}}},[r("p",{staticClass:"user-name"},[t._v(t._s(e.User.name))]),r("p",{staticClass:"user-account"},[t._v("@"+t._s(e.User.account)+" ·")]),r("p",{staticClass:"comment-date"},[t._v(t._s(t._f("fromNow")(e.createdAt)))])]),r("div",{staticClass:"content-description-reply d-flex"},[r("p",{staticClass:"content-text"},[t._v("回覆")]),r("p",{staticClass:"content-text coler-orange"},[t._v(" ＠"+t._s(t.userprofile.User.account)+" ")])]),r("div",{staticClass:"content-description-content mb-15"},[r("p",{staticClass:"content-text w-100"},[t._v(" "+t._s(e.comment)+" ")])])])])})),0)},u=[],d=r("2708"),f={mixins:[d["a"]],props:{userProfile:{type:Object,required:!0},Twitters:{type:Array,required:!0}},created:function(){this.fetchList()},watch:{repliedTwitter:function(t){this.twitters.unshift(t)},Twitters:function(t){this.twitters=t}},methods:{profileLink:function(t){this.$router.push({name:"profile",params:{id:t}})},fetchList:function(){this.twitters=this.Twitters,this.userprofile=this.userProfile}},data:function(){return{twitters:[],userprofile:{},twitter:"",twitterReply:""}}},p=f,w=(r("97c0"),r("2877")),v=Object(w["a"])(p,l,u,!1,null,"202faf2d",null),m=v.exports,h=r("2375"),g=r("aa0b"),C=r("ebc9"),x=r("4cce"),b=r("2f62"),k=r("2fa3"),U={mixins:[d["b"]],components:{Spinner:h["a"],Navbar:c["a"],Followers:o["a"],ReplyList:m},created:function(){var t=this.$route.params.id;this.fetchreplyList(t),this.fetchFollowerList(),this.fetchTwitterDetail(t),this.fetchUser()},computed:Object(n["a"])({},Object(b["b"])(["currentUser","isAuthenticated"])),methods:{profileLink:function(t){this.$router.push({name:"profile",params:{id:t}})},fetchUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x["a"].getCurrentUser();case 3:return r=e.sent,a=r.data.id,e.next=7,x["a"].UserProfile(a);case 7:s=e.sent,t.currentuser=s.data,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log("error",e.t0),k["a"].fire({icon:"warning",title:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},Liketwitter:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.isProcessing=!0,r.prev=1,r.next=4,g["a"].likeTwitter(t);case 4:if(a=r.sent,s=a.data,"success"===s.status){r.next=8;break}throw new Error(s.message);case 8:i=e.UserProfile.likedCount+1,e.UserProfile=Object(n["a"])(Object(n["a"])({},e.UserProfile),{},{isLiked:1,likedCount:i}),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](1),e.isProcessing=!1,k["a"].fire({icon:"warning",title:r.t0});case 16:e.isProcessing=!1;case 17:case"end":return r.stop()}}),r,null,[[1,12]])})))()},Unliketwitter:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.isProcessing=!0,r.prev=1,r.next=4,g["a"].unlikeTwitter(t);case 4:if(a=r.sent,s=a.data,"success"===s.status){r.next=8;break}throw new Error(s.message);case 8:i=e.UserProfile.likedCount-1,e.UserProfile=Object(n["a"])(Object(n["a"])({},e.UserProfile),{},{isLiked:0,likedCount:i}),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](1),e.isProcessing=!1,k["a"].fire({icon:"warning",title:r.t0});case 16:e.isProcessing=!1;case 17:case"end":return r.stop()}}),r,null,[[1,12]])})))()},fetchTwitterDetail:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g["a"].getTwitterDetail(t);case 3:a=r.sent,e.UserProfile=a.data,e.isLoading=!1,r.next=13;break;case 8:r.prev=8,r.t0=r["catch"](0),e.isLoading=!1,console.log("error",r.t0),k["a"].fire({icon:"warning",title:r.t0});case 13:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchreplyList:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g["a"].getReplyList(t);case 3:a=r.sent,e.twitters=a.data,r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log("error",r.t0),k["a"].fire({icon:"warning",title:r.t0});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},fetchFollowerList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C["a"].TopUsers();case 3:r=e.sent,t.followerlist=r.data,e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log("error",e.t0),k["a"].fire({icon:"warning",title:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},afterCreateTwitter:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,a=t.Description,e.twitter=a,!(e.twitter.length>140)){r.next=7;break}throw new Error("字數不可以超過140個字");case 7:if(0!==e.twitter.length){r.next=9;break}throw new Error("不可以輸入空白");case 9:return r.next=11,g["a"].postTwitter({description:e.twitter});case 11:if(s=r.sent,i=s.data,"success"===i.status){r.next=15;break}throw new Error(i.message);case 15:e.repliedTwitter={id:Math.floor(1e7*Math.random())+1,User:{id:e.UserProfile.id,account:e.UserProfile.account,name:e.UserProfile.name,avatar:e.UserProfile.avatar},repliedCount:0,followedCount:0,createdAt:new Date,updatedAt:"",isliked:!1,description:e.twitter},r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](0),console.log("error",r.t0),k["a"].fire({icon:"warning",title:r.t0});case 22:e.twitter="";case 23:case"end":return r.stop()}}),r,null,[[0,18]])})))()},replytwitter:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!(e.twitter.trim().length>140)){r.next=5;break}throw new Error("字數不可以超過140個字");case 5:if(0!==e.twitter.length){r.next=7;break}throw new Error("不可以輸入空白");case 7:return r.next=9,g["a"].replyTwitter(t,{comment:e.twitter});case 9:if(a=r.sent,s=a.data,"success"===s.status){r.next=13;break}throw new Error(s.message);case 13:location.reload(),r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),console.log("error",r.t0),k["a"].fire({icon:"warning",title:r.t0});case 20:e.twitter="";case 21:case"end":return r.stop()}}),r,null,[[0,16]])})))()}},data:function(){return{isLoading:!0,isProcessing:!1,twitter:"",UserId:"",currentuser:{},UserProfile:{User:{account:"test",avatar:"https://loremflickr.com/320/240/corgi?lock=14",cover:"test",createdAt:"test",email:"test@example.com",id:-1,introduction:"ttest",name:"test",password:"test",role:"test",updatedAt:"test"},UserId:-1,createdAt:"",description:"",id:-1,isLiked:-1,likedCount:-1,repliedCount:-1,updatedAt:""},repliedTwitter:{id:-1,User:{id:14,account:"bmw",name:"BMW",email:"BMW@example.com",avatar:"https://i.pravatar.cc/300",cover:"https://i.pravatar.cc/300",isFollowed:!0,introduction:"hello world!",followerCount:1,followingCount:3},repliedCount:-1,followedCount:-1,createdAt:"",updatedAt:"",isliked:!0,description:""},twitters:[],followerlist:[]}}},P=U,_=(r("f6e2"),Object(w["a"])(P,a,s,!1,null,"fa55cfce",null));e["default"]=_.exports},c8d2:function(t,e,r){var a=r("d039"),s=r("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!s[t]()||i[t]()!=i||s[t].name!==t}))}},f6e2:function(t,e,r){"use strict";r("0186")}}]);
//# sourceMappingURL=chunk-31ac7324.8a3153a8.js.map